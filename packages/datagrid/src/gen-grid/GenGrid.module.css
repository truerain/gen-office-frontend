/* packages/datagrid/src/gen-grid/GenGrid.module.css */
.root {
  width: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;

  /* component sizing (theme 아님) */
  --gen-grid-header-height: 40px;
  --gen-grid-row-height: 36px;
}

/* 스크롤 컨테이너가 border/radius를 "유일하게" 책임지게 한다.
   table의 border/radius는 제거 -> sticky/pinned에서 안전 */
.tableScroll {
  flex: 1 1 auto;
  min-height: 0;
  width: 100%;
  overflow: auto;
  position: relative;

  border: 1px solid var(--grid-border);
  border-radius: var(--grid-border-radius);
  background: var(--grid-bg);
  box-shadow: var(--grid-shadow);
}

/* 드래그 중에는 커서 강화 */
.tableScroll[data-resizing] {
  cursor: col-resize;
}

/* table은 레이아웃만 담당 (border/radius 제거) */
.table {
  width: max-content;
  min-width: 100%;
  table-layout: fixed;
  border-collapse: separate;
  border-spacing: 0;

  color: var(--grid-cell-text);
  background: var(--grid-bg);
}

.caption {
  text-align: left;
  padding: 12px 12px 0 12px;
  font-weight: 600;
  color: var(--grid-header-text);
}

.thead {
  background: var(--grid-header-bg);
}

/* ===== Header sticky layering =====
   - header는 overlay/pinned보다 우선적으로 위에 있어야 안정적
   - 다단 헤더 row는 z-index를 단계적으로 준다 */
.tableScroll[data-sticky-header] .thead th {
  position: sticky;
  background: var(--grid-header-bg);
  z-index: var(--grid-z-header);
}

/* 다중 헤더 row offset */
.tableScroll[data-sticky-header] .headerRow0 th {
  top: 0;
  z-index: calc(var(--grid-z-header) + 2);
}
.tableScroll[data-sticky-header] .headerRow1 th {
  top: var(--gen-grid-header-height);
  z-index: calc(var(--grid-z-header) + 1);
}
.tableScroll[data-sticky-header] .headerRow2 th {
  top: calc(var(--gen-grid-header-height) * 2);
  z-index: var(--grid-z-header);
}

/* th 기본 */
.th {
  height: var(--gen-grid-header-height);
  padding: 0 12px;
  border-right: 1px solid var(--grid-header-border);
  text-align: center;

  font-size: var(--grid-font-size);
  font-weight: var(--grid-header-font-weight);
  white-space: nowrap;

  background: var(--grid-header-bg);
  color: var(--grid-header-text);

  position: relative; /* th::after */
}

/* 헤더 하단 구분선 (sticky에서도 항상 보이게) */
.th::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: 0;
  width: 100%;
  border-bottom: 1px solid var(--grid-header-border);
  z-index: 1;
}

/* td 기본 */
.td {
  height: var(--gen-grid-row-height);
  padding: 0 var(--grid-cell-padding-x);
  vertical-align: middle;

  border-bottom: 1px solid var(--grid-cell-border);
  border-right: 1px solid var(--grid-cell-border);

  font-size: var(--grid-cell-font-size);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  background: var(--grid-cell-bg);
  color: var(--grid-cell-text);
}

.th:last-child,
.td:last-child {
  border-right: none;
}

/* 헤더 inner는 resizer 자리 확보 */
.thInner {
  height: var(--gen-grid-header-height);
  display: flex;
  position: relative;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

/* column filter row */
.columnFilter {
  padding: 4px 8px;
  border-top: 1px solid var(--grid-border);
  border-bottom: 1px solid var(--grid-border);
  background: var(--grid-header-bg);
  color: var(--grid-cell-text);
}

.tbody .tr:last-child .td {
  border-bottom: none;
}

/* ===== Row state precedence =====
   selected > hover > base
   (hover가 selected를 덮지 않게 순서/선택자를 잡음) */
.tbody .tr:hover .td {
  background: var(--grid-cell-bg-hover);
}

.tbody .tr.is-selected .td {
  background: var(--grid-cell-bg-selected);
}

/* selected row + hover 시 (선택 유지하면서 hover도 살짝) - 필요하면 사용
.tbody .tr.is-selected:hover .td {
  background: var(--grid-cell-bg-selected);
}
*/

/* Step2 additions */
.alignLeft { text-align: left; }
.alignCenter { text-align: center; }
.alignRight { text-align: right; }

.mono {
  font-variant-numeric: tabular-nums;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
    "Courier New", monospace;
}

.cellContent {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

/* (선택) cell 예시용 */
.badge {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid var(--grid-border);
  background: var(--grid-cell-bg);
  color: var(--grid-cell-text);
  font-size: 12px;
}

/* ===== Sorting header styles ===== */
.sortable {
  cursor: pointer;
  user-select: none;
}

.sortable:hover {
  background: var(--grid-header-bg-hover);
}

.sorted {
  background: var(--grid-header-bg-active);
}

.sortIcon {
  opacity: 0.9;
  font-size: 12px;
  color: var(--grid-header-sort-icon);
}

/* Step4: selection column(체크박스 열) */
.selectCol {
  width: 44px;
  text-align: center;
}

/* ===== Toolbar / Pager (grid 톤 통일) ===== */
.footerInfo {
  margin-top: 10px;
  font-size: 13px;
  opacity: 0.75;
  color: var(--grid-empty-text);
}

.pager {
  margin-top: 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.pagerLeft,
.pagerRight,
.pagerMid {
  display: flex;
  align-items: center;
  gap: 8px;
}

.pagerBtn {
  padding: 6px 10px;
  border-radius: 8px;
  border: 1px solid var(--grid-border);
  background: var(--grid-bg);
  color: var(--grid-cell-text);
}

.pagerBtn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.pagerLabel {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  opacity: 0.9;
  color: var(--grid-cell-text);
}

.pagerSelect {
  padding: 6px 8px;
  border-radius: 8px;
  border: 1px solid var(--grid-border);
  background: var(--grid-bg);
  color: var(--grid-cell-text);
}

.filterInput {
  width: 100%;
  padding: 6px 8px;
  border-radius: 8px;
  height: calc(var(--gen-grid-header-height) - 10px);
  border: 1px solid var(--grid-border);
  background: var(--grid-bg);
  color: var(--grid-cell-text);
  font-size: 13px;
}

.toolbar {
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.globalSearch {
  flex: 1;
  min-width: 220px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid var(--grid-border);
  background: var(--grid-bg);
  color: var(--grid-cell-text);
  font-size: 14px;
}

.toolbarBtn {
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid var(--grid-border);
  background: var(--grid-bg);
  color: var(--grid-cell-text);
}

.toolbarBtn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ===== Pinning =====
   pinned는 "z-index + 배경 고정"이 핵심.
   그리고 hover/selected가 pinned에도 동일하게 적용되도록
   pinned 배경은 기본값을 주되, row state에서 다시 덮도록 한다. */
.pinned {
  z-index: var(--grid-z-pinned);
  background: var(--grid-cell-bg-pinned);
}

/* pinned이면서 hover/selected일 때도 동일하게 (중요) */
.tbody .tr:hover .td.pinned {
  background: var(--grid-cell-bg-hover);
}
.tbody .tr.is-selected .td.pinned {
  background: var(--grid-cell-bg-selected);
}

/* left / right 경계 shadow */
.pinnedLeft {
  box-shadow: var(--grid-cell-shadow-pinned-left);
}
.pinnedRight {
  box-shadow: var(--grid-cell-shadow-pinned-right);
}

/* header pinned는 header 토큰을 사용 */
.tableScroll[data-sticky-header] .thead th.pinned {
  background: var(--grid-header-bg-pinned);
}
.tableScroll[data-sticky-header] .thead th.pinnedLeft {
  box-shadow: var(--grid-header-shadow-pinned-left);
}
.tableScroll[data-sticky-header] .thead th.pinnedRight {
  box-shadow: var(--grid-header-shadow-pinned-right);
}

/* pin 버튼 영역 */
.pinControls {
  margin-left: auto;
  display: inline-flex;
  gap: 4px;
}

.pinBtn {
  padding: 2px 6px;
  border-radius: 8px;
  border: 1px solid var(--grid-border);
  background: var(--grid-bg);
  color: var(--grid-cell-text);
  font-size: 12px;
  line-height: 1.2;
}

.pinBtn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ===== Resizer ===== */
.resizer {
  position: absolute;
  top: 0;
  right: 0;
  width: 8px;
  height: 100%;
  cursor: col-resize;
  touch-action: none;
  user-select: none;
  z-index: var(--grid-z-cell-overlay); /* pinned 위로 */
}

.resizer:hover {
  background: var(--grid-column-resizer-hover);
}

.resizerActive {
  background: var(--grid-column-resizer);
}
